<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="常用代码片段"><meta name="keywords" content="ES6"><meta name="author" content="Doug Flands"><meta name="copyright" content="Doug Flands"><title>常用代码片段 | Flands Blog</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.1"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css?version=1.9.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="manifest" href="/manifest.json"><link rel="manifest" href="/manifest.json"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  hexoVersion: '7.1.1'
} </script><meta name="generator" content="Hexo 7.1.1"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Array"><span class="toc-number">1.</span> <span class="toc-text">Array</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%8D%E5%8E%86%E6%95%B0%E7%BB%84"><span class="toc-number">1.1.</span> <span class="toc-text">遍历数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%A0%E5%B0%84%E6%96%B0%E6%95%B0%E7%BB%84"><span class="toc-number">1.2.</span> <span class="toc-text">映射新数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%80%E6%9C%89%E5%85%83%E7%B4%A0%E6%98%AF%E5%90%A6%E9%80%9A%E8%BF%87%E6%B5%8B%E8%AF%95"><span class="toc-number">1.3.</span> <span class="toc-text">所有元素是否通过测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%AF%E5%90%A6%E6%9C%89%E5%85%83%E7%B4%A0%E9%80%9A%E8%BF%87%E6%B5%8B%E8%AF%95"><span class="toc-number">1.4.</span> <span class="toc-text">是否有元素通过测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%87%E6%BB%A4%E6%95%B0%E7%BB%84"><span class="toc-number">1.5.</span> <span class="toc-text">过滤数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E7%AC%A6%E5%90%88%E6%9D%A1%E4%BB%B6%E7%9A%84%E5%85%83%E7%B4%A0"><span class="toc-number">1.6.</span> <span class="toc-text">查找符合条件的元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%95%B0%E7%BB%84"><span class="toc-number">1.7.</span> <span class="toc-text">连接数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%8E%BB%E9%87%8D"><span class="toc-number">1.8.</span> <span class="toc-text">数组去重</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E6%95%B0%E7%BB%84%E5%8F%96%E5%B9%B3%E5%9D%87%E5%80%BC"><span class="toc-number">1.9.</span> <span class="toc-text">通过数组取平均值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%88%87%E5%9D%97"><span class="toc-number">1.10.</span> <span class="toc-text">数组切块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%8B%E7%BC%A9"><span class="toc-number">1.11.</span> <span class="toc-text">压缩</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%95%B0%E7%BB%84%E4%B8%AD%E6%8C%87%E5%AE%9A%E5%80%BC%E5%87%BA%E7%8E%B0%E7%9A%84%E6%AC%A1%E6%95%B0"><span class="toc-number">1.12.</span> <span class="toc-text">计算数组中指定值出现的次数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%B1%E5%BA%A6%E5%B1%95%E5%BC%80%E6%95%B0%E7%BB%84"><span class="toc-number">1.13.</span> <span class="toc-text">深度展开数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E6%9C%80%E5%A4%A7%E5%80%BC"><span class="toc-number">1.14.</span> <span class="toc-text">获取数组中的最大值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E5%88%86%E7%BB%84"><span class="toc-number">1.15.</span> <span class="toc-text">条件分组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%BB%E9%99%A4%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E5%85%83%E7%B4%A0"><span class="toc-number">1.16.</span> <span class="toc-text">去除最后一个元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%8C%87%E5%AE%9A%E8%8C%83%E5%9B%B4%E6%9D%A5%E5%AE%9A%E4%B9%89%E6%95%B0%E7%BB%84"><span class="toc-number">1.17.</span> <span class="toc-text">使用指定范围来定义数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%8C%87%E5%AE%9A%E5%80%BC%E6%9D%A5%E5%AE%9A%E4%B9%89%E6%95%B0%E7%BB%84"><span class="toc-number">1.18.</span> <span class="toc-text">使用指定值来定义数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E7%BB%84%E7%9A%84%E4%B8%AD%E9%97%B4%E5%80%BC"><span class="toc-number">1.19.</span> <span class="toc-text">获取数组的中间值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E7%BB%84%E7%9A%84%E4%BA%A4%E9%9B%86"><span class="toc-number">1.20.</span> <span class="toc-text">获取数组的交集</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E7%9A%84%E6%80%BB%E5%92%8C"><span class="toc-number">1.21.</span> <span class="toc-text">数组的总和</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Object"><span class="toc-number">2.</span> <span class="toc-text">Object</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%AF%B9%E8%B1%A1%E7%9A%84key"><span class="toc-number">2.1.</span> <span class="toc-text">获取对象的key</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%AF%B9%E8%B1%A1%E9%87%8C%E6%95%B0%E6%8D%AE%E7%9A%84%E6%95%B0%E9%87%8F"><span class="toc-number">2.2.</span> <span class="toc-text">获取对象里数据的数量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%81%8D%E5%8E%86%E6%95%B0%E7%BB%84-1"><span class="toc-number">2.3.</span> <span class="toc-text">遍历数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#extend"><span class="toc-number">2.4.</span> <span class="toc-text">extend</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%94%AE%E5%80%BC%E5%AF%B9%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1"><span class="toc-number">2.5.</span> <span class="toc-text">键值对创建对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E7%94%9F%E6%88%90%E9%94%AE%E5%80%BC%E5%AF%B9"><span class="toc-number">2.6.</span> <span class="toc-text">对象生成键值对</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%85%E6%8B%B7%E8%B4%9D%E5%AF%B9%E8%B1%A1"><span class="toc-number">2.7.</span> <span class="toc-text">浅拷贝对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Function"><span class="toc-number">3.</span> <span class="toc-text">Function</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%BE%E5%BC%8F%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0"><span class="toc-number">3.1.</span> <span class="toc-text">链式异步函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%A1%E9%81%93"><span class="toc-number">3.2.</span> <span class="toc-text">管道</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#promise%E8%BD%AC%E5%8C%96"><span class="toc-number">3.3.</span> <span class="toc-text">promise转化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%9F%E5%88%97%E8%BF%90%E8%A1%8Cpromise"><span class="toc-number">3.4.</span> <span class="toc-text">队列运行promise</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9D%A1%E7%9C%A0"><span class="toc-number">3.5.</span> <span class="toc-text">睡眠</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Math"><span class="toc-number">4.</span> <span class="toc-text">Math</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%80%83%E6%8B%89%E5%85%B9%E7%AE%97%E6%B3%95"><span class="toc-number">4.1.</span> <span class="toc-text">考拉兹算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B6%E4%B9%98"><span class="toc-number">4.2.</span> <span class="toc-text">阶乘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%80%E5%A4%A7%E5%85%AC%E7%BA%A6%E6%95%B0-%E4%BD%BF%E7%94%A8%E8%BE%97%E8%BD%AC%E7%9B%B8%E4%B9%98%E6%B3%95"><span class="toc-number">4.3.</span> <span class="toc-text">最大公约数(使用辗转相乘法)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%99%BE%E5%88%86%E4%BD%8D%E6%95%B0"><span class="toc-number">4.4.</span> <span class="toc-text">百分位数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%96%E5%B0%8F%E6%95%B0%E7%82%B9%E5%90%8E-n-%E4%BD%8D"><span class="toc-number">4.5.</span> <span class="toc-text">取小数点后 n 位</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#String"><span class="toc-number">5.</span> <span class="toc-text">String</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%80%E6%9C%89%E5%8D%95%E8%AF%8D%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AF%8D%E5%A4%A7%E5%86%99"><span class="toc-number">5.1.</span> <span class="toc-text">所有单词的第一个字母大写</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E8%AF%8D%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%AD%97%E6%AF%8D%E5%A4%A7%E5%86%99"><span class="toc-number">5.2.</span> <span class="toc-text">单词的第一个字母大写</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E5%9B%9E%E6%96%87"><span class="toc-number">5.3.</span> <span class="toc-text">检查回文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8E%92%E5%BA%8F-%E6%8C%89%E5%AD%97%E6%AF%8D%E9%A1%BA%E5%BA%8F%E6%8E%92%E5%88%97"><span class="toc-number">5.4.</span> <span class="toc-text">字符串排序(按字母顺序排列)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%88%AA%E6%96%AD"><span class="toc-number">5.5.</span> <span class="toc-text">字符串截断</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Media"><span class="toc-number">6.</span> <span class="toc-text">Media</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E9%9F%B3%E5%90%88%E6%88%90-%E8%AF%95%E9%AA%8C%E5%8A%9F%E8%83%BD"><span class="toc-number">6.1.</span> <span class="toc-text">语音合成(试验功能)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Browser"><span class="toc-number">7.</span> <span class="toc-text">Browser</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%95%E9%83%A8%E5%8F%AF%E8%A7%81%E5%8D%B3%E6%BB%9A%E5%8A%A8%E8%87%B3%E5%BA%95%E9%83%A8"><span class="toc-number">7.1.</span> <span class="toc-text">底部可见即滚动至底部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BD%93%E5%89%8D%E9%93%BE%E6%8E%A5%E5%9C%B0%E5%9D%80"><span class="toc-number">7.2.</span> <span class="toc-text">当前链接地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%83%E7%B4%A0%E5%9C%A8%E8%A7%86%E7%AA%97%E4%B8%AD%E5%8F%AF%E8%A7%81"><span class="toc-number">7.3.</span> <span class="toc-text">元素在视窗中可见</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%BB%9A%E5%8A%A8%E4%BD%8D%E7%BD%AE"><span class="toc-number">7.4.</span> <span class="toc-text">获取滚动位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#URL-%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">7.5.</span> <span class="toc-text">URL 重定向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%BB%9A%E5%8A%A8%E8%87%B3%E9%A1%B6%E9%83%A8"><span class="toc-number">7.6.</span> <span class="toc-text">滚动至顶部</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Date"><span class="toc-number">8.</span> <span class="toc-text">Date</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E4%B8%A4%E4%B8%AA%E6%97%A5%E6%9C%9F%E9%97%B4%E7%9A%84%E5%B7%AE%E8%B7%9D"><span class="toc-number">8.1.</span> <span class="toc-text">获取两个日期间的差距</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Utility"><span class="toc-number">9.</span> <span class="toc-text">Utility</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%80%BC%E7%9A%84%E5%8E%9F%E5%A7%8B%E7%B1%BB%E5%9E%8B"><span class="toc-number">9.1.</span> <span class="toc-text">获取值的原始类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E9%87%8F%E5%87%BD%E6%95%B0%E7%9A%84%E8%80%97%E6%97%B6"><span class="toc-number">9.2.</span> <span class="toc-text">测量函数的耗时</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E8%8C%83%E5%9B%B4%E5%86%85%E7%9A%84%E9%9A%8F%E6%9C%BA%E6%95%B4%E6%95%B0"><span class="toc-number">9.3.</span> <span class="toc-text">指定范围内的随机整数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E8%8C%83%E5%9B%B4%E5%86%85%E7%9A%84%E9%9A%8F%E6%9C%BA%E6%95%B0"><span class="toc-number">9.4.</span> <span class="toc-text">指定范围内的随机数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RGB%E8%BD%AC%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6"><span class="toc-number">9.5.</span> <span class="toc-text">RGB转十六进制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E4%B8%A4%E4%B8%AA%E5%8F%98%E9%87%8F%E7%9A%84%E5%80%BC"><span class="toc-number">9.6.</span> <span class="toc-text">交换两个变量的值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#URL%E5%8F%82%E6%95%B0"><span class="toc-number">9.7.</span> <span class="toc-text">URL参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%80%BC%E6%88%96%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="toc-number">9.8.</span> <span class="toc-text">值或默认值</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://flands.com/avatar/192.jpg"></div><div class="author-info__name text-center">Doug Flands</div><div class="author-info__description text-center">Flands</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">55</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">19</span></a></div></div></div><div id="content-outer"><div class="plain" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Flands Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a></span><span class="pull-right"></span></div></div><div class="layout" id="content-inner"><article id="post"><div class="plain" id="post-title">常用代码片段</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-01-15</time></div><div class="article-container" id="post-content"><h2 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h2><h3 id="遍历数组"><a href="#遍历数组" class="headerlink" title="遍历数组"></a>遍历数组</h3><p><code>[1, 2, 3].forEach((val, index) =&gt; console.log(val))</code></p>
<h3 id="映射新数组"><a href="#映射新数组" class="headerlink" title="映射新数组"></a>映射新数组</h3><p><code>let arr = [1, 2, 3].map(v=&gt;v*2)</code></p>
<h3 id="所有元素是否通过测试"><a href="#所有元素是否通过测试" class="headerlink" title="所有元素是否通过测试"></a>所有元素是否通过测试</h3><p><code>[1, 2, 3, 4].every(v=&gt;v&gt;3)</code></p>
<h3 id="是否有元素通过测试"><a href="#是否有元素通过测试" class="headerlink" title="是否有元素通过测试"></a>是否有元素通过测试</h3><p><code>[1, 2, 3, 4].some(v=&gt;v&gt;3)</code></p>
<span id="more"></span>

<h3 id="过滤数组"><a href="#过滤数组" class="headerlink" title="过滤数组"></a>过滤数组</h3><p><code>[1, 2, 3, 4, 5].filter(v=&gt;v&gt;3)</code></p>
<h3 id="查找符合条件的元素"><a href="#查找符合条件的元素" class="headerlink" title="查找符合条件的元素"></a>查找符合条件的元素</h3><p><code>arr = [&#123; name: &#39;dashen&#39;, age: 18 &#125;, &#123; name: &#39;rom&#39;, age: 1 &#125;]</code></p>
<h3 id="连接数组"><a href="#连接数组" class="headerlink" title="连接数组"></a>连接数组</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let arr1 = [1, 2, 3];</span><br><span class="line">let arr2 = [4, 5, 6];</span><br><span class="line">[...arr1,...arr2];</span><br></pre></td></tr></table></figure>
<h3 id="数组去重"><a href="#数组去重" class="headerlink" title="数组去重"></a>数组去重</h3><p><code>[...new Set(arr)]</code></p>
<h3 id="通过数组取平均值"><a href="#通过数组取平均值" class="headerlink" title="通过数组取平均值"></a>通过数组取平均值</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const average = arr =&gt; arr.reduce((acc, val) =&gt; acc + val, 0) / arr.length;</span><br><span class="line">// average([1,2,3]) -&gt; 2</span><br></pre></td></tr></table></figure>
<h3 id="数组切块"><a href="#数组切块" class="headerlink" title="数组切块"></a>数组切块</h3><p>使用 Array.from() 创建一个满足块的数量的新的数组。<br>使用 Array.slice() 将新数组的每个元素映射到 size 长度的块。<br>如果原始数组不能均匀分割，最后的块将包含剩余的元素。  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const chunk = (arr, size) =&gt;</span><br><span class="line">  Array.from(&#123;length: Math.ceil(arr.length / size)&#125;, (v, i) =&gt; arr.slice(i * size, i * size + size));</span><br><span class="line">// chunk([1,2,3,4,5], 2) -&gt; [[1,2],[3,4],5]</span><br></pre></td></tr></table></figure>
<h3 id="压缩"><a href="#压缩" class="headerlink" title="压缩"></a>压缩</h3><p>使用 Array.filter() 去过滤掉假值(false, null, 0, “”, undefined 和 NaN)  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const compact = (arr) =&gt; arr.filter(v =&gt; v);</span><br><span class="line">// compact([0, 1, false, 2, &#x27;&#x27;, 3, &#x27;a&#x27;, &#x27;e&#x27;*23, NaN, &#x27;s&#x27;, 34]) -&gt; [ 1, 2, 3, &#x27;a&#x27;, &#x27;s&#x27;, 34 ]</span><br></pre></td></tr></table></figure>
<h3 id="计算数组中指定值出现的次数"><a href="#计算数组中指定值出现的次数" class="headerlink" title="计算数组中指定值出现的次数"></a>计算数组中指定值出现的次数</h3><p>使用 Array.reduce() 去迭代数组，当值相同时，递增计数器。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const countOccurrences = (arr, value) =&gt; arr.reduce((a, v) =&gt; v === value ? a + 1 : a + 0, 0);</span><br><span class="line">// countOccurrences([1,1,2,1,2,3], 1) -&gt; 3</span><br></pre></td></tr></table></figure>
<h3 id="深度展开数组"><a href="#深度展开数组" class="headerlink" title="深度展开数组"></a>深度展开数组</h3><p>使用递归。<br>使用 Array.reduce() 获取所有不是数组的值，并将数组展开。  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const deepFlatten = arr =&gt;</span><br><span class="line">  arr.reduce((a, v) =&gt; a.concat(Array.isArray(v) ? deepFlatten(v) : v), []);</span><br><span class="line">// deepFlatten([1,[2],[[3],4],5]) -&gt; [1,2,3,4,5]</span><br></pre></td></tr></table></figure>
<h3 id="获取数组中的最大值"><a href="#获取数组中的最大值" class="headerlink" title="获取数组中的最大值"></a>获取数组中的最大值</h3><p>使用 Math.max() 配合 … 扩展运算符去获取数组中的最大值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const arrayMax = arr =&gt; Math.max(...arr);</span><br><span class="line">// arrayMax([10, 1, 5]) -&gt; 10</span><br></pre></td></tr></table></figure>
<h3 id="条件分组"><a href="#条件分组" class="headerlink" title="条件分组"></a>条件分组</h3><p>使用 Array.map() 将数组的值映射到函数或属性名称。<br>使用 Array.reduce() 创建一个对象，其中的键是从映射的结果中产生的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const groupBy = (arr, func) =&gt;</span><br><span class="line">  arr.map(typeof func === &#x27;function&#x27; ? func : val =&gt; val[func])</span><br><span class="line">    .reduce((acc, val, i) =&gt; &#123; acc[val] = (acc[val] || []).concat(arr[i]); return acc; &#125;, &#123;&#125;);</span><br><span class="line">// groupBy([6.1, 4.2, 6.3], Math.floor) -&gt; &#123;4: [4.2], 6: [6.1, 6.3]&#125;</span><br><span class="line">// groupBy([&#x27;one&#x27;, &#x27;two&#x27;, &#x27;three&#x27;], &#x27;length&#x27;) -&gt; &#123;3: [&#x27;one&#x27;, &#x27;two&#x27;], 5: [&#x27;three&#x27;]&#125;</span><br></pre></td></tr></table></figure>
<h3 id="去除最后一个元素"><a href="#去除最后一个元素" class="headerlink" title="去除最后一个元素"></a>去除最后一个元素</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const initial = arr =&gt; arr.slice(0, -1);</span><br><span class="line">// initial([1,2,3]) -&gt; [1,2]</span><br></pre></td></tr></table></figure>
<h3 id="使用指定范围来定义数组"><a href="#使用指定范围来定义数组" class="headerlink" title="使用指定范围来定义数组"></a>使用指定范围来定义数组</h3><p>使用 Array(end-start) 创建一个所需长度的数组，使用 Array.map() 来填充范围中的所需值。<br>你可以省略start，默认值为 0。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const initializeArrayRange = (end, start = 0) =&gt;</span><br><span class="line">  Array.apply(null, Array(end - start)).map((v, i) =&gt; i + start);</span><br><span class="line">// initializeArrayRange(5) -&gt; [0,1,2,3,4]</span><br></pre></td></tr></table></figure>
<h3 id="使用指定值来定义数组"><a href="#使用指定值来定义数组" class="headerlink" title="使用指定值来定义数组"></a>使用指定值来定义数组</h3><p>使用 Array(n) 创建一个所需长度的数组，使用 fill(v) 去填充所需要的值。<br>亦可以省略 value，默认值为 0。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const initializeArray = (n, value = 0) =&gt; Array(n).fill(value);</span><br><span class="line">// initializeArray(5, 2) -&gt; [2,2,2,2,2]</span><br></pre></td></tr></table></figure>
<h3 id="获取数组的中间值"><a href="#获取数组的中间值" class="headerlink" title="获取数组的中间值"></a>获取数组的中间值</h3><p>找到数组的中间，使用 Array.sort() 对值进行排序。<br>如果长度是奇数，则返回中点处的数字，否则返回两个中间数字的平均值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const median = arr =&gt; &#123;</span><br><span class="line">  const mid = Math.floor(arr.length / 2), nums = arr.sort((a, b) =&gt; a - b);</span><br><span class="line">  return arr.length % 2 !== 0 ? nums[mid] : (nums[mid - 1] + nums[mid]) / 2;</span><br><span class="line">&#125;;</span><br><span class="line">// median([5,6,50,1,-5]) -&gt; 5</span><br><span class="line">// median([0,10,-2,7]) -&gt; 3.5</span><br></pre></td></tr></table></figure>
<h3 id="获取数组的交集"><a href="#获取数组的交集" class="headerlink" title="获取数组的交集"></a>获取数组的交集</h3><p>使用 filter() 移除不是 values 的一部分的值，使用 includes() 确定。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const similarity = (arr, values) =&gt; arr.filter(v =&gt; values.includes(v));</span><br><span class="line">// similarity([1,2,3], [1,2,4]) -&gt; [1,2]</span><br></pre></td></tr></table></figure>
<h3 id="数组的总和"><a href="#数组的总和" class="headerlink" title="数组的总和"></a>数组的总和</h3><p>使用 Array.reduce() 去迭代值并计算累计器，初始值为 0。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const sum = arr =&gt; arr.reduce((acc, val) =&gt; acc + val, 0);</span><br><span class="line">// sum([1,2,3,4]) -&gt; 10</span><br></pre></td></tr></table></figure>

<h2 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h2><h3 id="获取对象的key"><a href="#获取对象的key" class="headerlink" title="获取对象的key"></a>获取对象的key</h3><p><code>Object.keys(&#123;name:&#39;a&#39;,age:1&#125;)</code></p>
<h3 id="获取对象里数据的数量"><a href="#获取对象里数据的数量" class="headerlink" title="获取对象里数据的数量"></a>获取对象里数据的数量</h3><p><code>Object.keys(&#123;name:&#39;a&#39;,age:1&#125;).length</code></p>
<h3 id="遍历数组-1"><a href="#遍历数组-1" class="headerlink" title="遍历数组"></a>遍历数组</h3><p><code>Object.entries(&#123;name:&#39;a&#39;,age:1&#125;)</code></p>
<h3 id="extend"><a href="#extend" class="headerlink" title="extend"></a>extend</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const obj = &#123;name:&#x27;a&#x27;,age:1&#125;</span><br><span class="line">const newObj = &#123;...obj, job:&#x27;IT&#x27;, age:2&#125;</span><br></pre></td></tr></table></figure>
<h3 id="键值对创建对象"><a href="#键值对创建对象" class="headerlink" title="键值对创建对象"></a>键值对创建对象</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const objectFromPairs = arr =&gt; arr.reduce((a, v) =&gt; (a[v[0]] = v[1], a), &#123;&#125;);</span><br><span class="line">// objectFromPairs([[&#x27;a&#x27;,1],[&#x27;b&#x27;,2]]) -&gt; &#123;a: 1, b: 2&#125;</span><br></pre></td></tr></table></figure>
<h3 id="对象生成键值对"><a href="#对象生成键值对" class="headerlink" title="对象生成键值对"></a>对象生成键值对</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const objectToPairs = obj =&gt; Object.keys(obj).map(k =&gt; [k, obj[k]]);</span><br><span class="line">// objectToPairs(&#123;a: 1, b: 2&#125;) -&gt; [[&#x27;a&#x27;,1],[&#x27;b&#x27;,2]])</span><br></pre></td></tr></table></figure>
<h3 id="浅拷贝对象"><a href="#浅拷贝对象" class="headerlink" title="浅拷贝对象"></a>浅拷贝对象</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const shallowClone = obj =&gt; (&#123; ...obj &#125;);</span><br><span class="line">/*</span><br><span class="line">const a = &#123; x: true, y: 1 &#125;;</span><br><span class="line">const b = shallowClone(a);</span><br><span class="line">a === b -&gt; false</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<h2 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h2><h3 id="链式异步函数"><a href="#链式异步函数" class="headerlink" title="链式异步函数"></a>链式异步函数</h3><p>循环遍历包含异步事件的函数数组，当每个异步事件完成时调用 next。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const chainAsync = fns =&gt; &#123; let curr = 0; const next = () =&gt; fns[curr++](next); next(); &#125;;</span><br><span class="line">/*</span><br><span class="line">chainAsync([</span><br><span class="line">  next =&gt; &#123; console.log(&#x27;0 seconds&#x27;); setTimeout(next, 1000); &#125;,</span><br><span class="line">  next =&gt; &#123; console.log(&#x27;1 second&#x27;);  setTimeout(next, 1000); &#125;,</span><br><span class="line">  next =&gt; &#123; console.log(&#x27;2 seconds&#x27;); &#125;</span><br><span class="line">])</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
<h3 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h3><p>使用 Array.reduce() 让值在函数间流通。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const pipe = (...funcs) =&gt; arg =&gt; funcs.reduce((acc, func) =&gt; func(acc), arg);</span><br><span class="line">// pipe(btoa, x =&gt; x.toUpperCase())(&quot;Test&quot;) -&gt; &quot;VGVZDA==&quot;</span><br></pre></td></tr></table></figure>
<h3 id="promise转化"><a href="#promise转化" class="headerlink" title="promise转化"></a>promise转化</h3><p>使用 currying 返回一个函数，返回一个调用原始函数的 Promise。<br>使用 …rest 运算符传入所有参数。<br>Node 8 版本以上，你可以使用 util.promisify  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const promisify = func =&gt;</span><br><span class="line">  (...args) =&gt;</span><br><span class="line">    new Promise((resolve, reject) =&gt;</span><br><span class="line">      func(...args, (err, result) =&gt;</span><br><span class="line">        err ? reject(err) : resolve(result))</span><br><span class="line">    );</span><br><span class="line">// const delay = promisify((d, cb) =&gt; setTimeout(cb, d))</span><br><span class="line">// delay(2000).then(() =&gt; console.log(&#x27;Hi!&#x27;)) -&gt; Promise resolves after 2s</span><br></pre></td></tr></table></figure>
<h3 id="队列运行promise"><a href="#队列运行promise" class="headerlink" title="队列运行promise"></a>队列运行promise</h3><p>使用 Array.reduce() 通过创建一个 promise 链来运行一系列 promise，每个 promise 在解析时返回下一个 promise。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const series = ps =&gt; ps.reduce((p, next) =&gt; p.then(next), Promise.resolve());</span><br><span class="line">// const delay = (d) =&gt; new Promise(r =&gt; setTimeout(r, d))</span><br><span class="line">// series([() =&gt; delay(1000), () =&gt; delay(2000)]) -&gt; executes each promise sequentially, taking a total of 3 seconds to complete</span><br></pre></td></tr></table></figure>
<h3 id="睡眠"><a href="#睡眠" class="headerlink" title="睡眠"></a>睡眠</h3><p>通过返回一个 Promise 延迟执行 async 函数，把它放到睡眠状态。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const sleep = ms =&gt; new Promise(resolve =&gt; setTimeout(resolve, ms));</span><br><span class="line">/*</span><br><span class="line">async function sleepyWork() &#123;</span><br><span class="line">  console.log(&#x27;I\&#x27;m going to sleep for 1 second.&#x27;);</span><br><span class="line">  await sleep(1000);</span><br><span class="line">  console.log(&#x27;I woke up after 1 second.&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>

<h2 id="Math"><a href="#Math" class="headerlink" title="Math"></a>Math</h2><h3 id="考拉兹算法"><a href="#考拉兹算法" class="headerlink" title="考拉兹算法"></a>考拉兹算法</h3><p>如果 n 是偶数，返回 n&#x2F;2，否则返回 3n+1</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const collatz = n =&gt; (n % 2 == 0) ? (n / 2) : (3 * n + 1);</span><br><span class="line">// collatz(8) --&gt; 4</span><br><span class="line">// collatz(5) --&gt; 16</span><br></pre></td></tr></table></figure>
<h3 id="阶乘"><a href="#阶乘" class="headerlink" title="阶乘"></a>阶乘</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const factorial = n =&gt; n &lt;= 1 ? 1 : n * factorial(n - 1);</span><br><span class="line">// factorial(6) -&gt; 720</span><br></pre></td></tr></table></figure>
<h3 id="最大公约数-使用辗转相乘法"><a href="#最大公约数-使用辗转相乘法" class="headerlink" title="最大公约数(使用辗转相乘法)"></a>最大公约数(使用辗转相乘法)</h3><p>使用递归。<br>基本情况是如果 y 等于 0，则返回 x。<br>其它情况下，返回 y 与 x&#x2F;y 的最大公约数。  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const gcd = (x, y) =&gt; !y ? x : gcd(y, x % y);</span><br><span class="line">// gcd (8, 36) -&gt; 4</span><br></pre></td></tr></table></figure>
<h3 id="百分位数"><a href="#百分位数" class="headerlink" title="百分位数"></a>百分位数</h3><p>使用百分比公式计算给定数组中有多少个数小于或等于给定值。<br>使用Array.reduce()计算值的下面有多少个数是相同的值, 并应用百分比公式。  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const percentile = (arr, val) =&gt; </span><br><span class="line">  100 * arr.reduce((acc,v) =&gt; acc + (v &lt; val ? 1 : 0) + (v === val ? 0.5 : 0), 0) / arr.length;</span><br><span class="line">// percentile([1,2,3,4,5,6,7,8,9,10], 6) -&gt; 55</span><br></pre></td></tr></table></figure>
<h3 id="取小数点后-n-位"><a href="#取小数点后-n-位" class="headerlink" title="取小数点后 n 位"></a>取小数点后 n 位</h3><p>使用 Math.round() 和字符串模板将数字四舍五入到指定的位数。<br>省略第二个参数，decimals 将四舍五入到一个整数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const round = (n, decimals=0) =&gt; Number(`$&#123;Math.round(`$&#123;n&#125;e$&#123;decimals&#125;`)&#125;e-$&#123;decimals&#125;`);</span><br><span class="line">// round(1.005, 2) -&gt; 1.01</span><br></pre></td></tr></table></figure>

<h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><h3 id="所有单词的第一个字母大写"><a href="#所有单词的第一个字母大写" class="headerlink" title="所有单词的第一个字母大写"></a>所有单词的第一个字母大写</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const capitalizeEveryWord = str =&gt; str.replace(/\b[a-z]/g, char =&gt; char.toUpperCase());</span><br><span class="line">// capitalizeEveryWord(&#x27;hello world!&#x27;) -&gt; &#x27;Hello World!&#x27;</span><br></pre></td></tr></table></figure>
<h3 id="单词的第一个字母大写"><a href="#单词的第一个字母大写" class="headerlink" title="单词的第一个字母大写"></a>单词的第一个字母大写</h3><p>使用 slice(0,1) 和 toUpperCase() 将首字母大写，使用 slice(1) 得到字符串的其余部分。<br>忽略 lowerRest 参数以保持字符串的其余部分不变，或者将其设置为 true 以转换为小写字母。  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const capitalize = (str, lowerRest = false) =&gt;</span><br><span class="line">  str.slice(0, 1).toUpperCase() + (lowerRest ? str.slice(1).toLowerCase() : str.slice(1));</span><br><span class="line">// capitalize(&#x27;myName&#x27;, true) -&gt; &#x27;Myname&#x27;</span><br></pre></td></tr></table></figure>
<h3 id="检查回文"><a href="#检查回文" class="headerlink" title="检查回文"></a>检查回文</h3><p>使用 toLowerCase() 转换字符串并用 replace() 删除其中的非字母数字字符。<br>然后，使用 split(‘’) 分散为单个字符，再使用 reverse() 和 join(‘’) 倒序合并后与原字符进行比较。  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const palindrome = str =&gt; &#123;</span><br><span class="line">  const s = str.toLowerCase().replace(/[\W_]/g,&#x27;&#x27;);</span><br><span class="line">  return s === s.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">// palindrome(&#x27;taco cat&#x27;) -&gt; true</span><br></pre></td></tr></table></figure>
<h3 id="字符串排序-按字母顺序排列"><a href="#字符串排序-按字母顺序排列" class="headerlink" title="字符串排序(按字母顺序排列)"></a>字符串排序(按字母顺序排列)</h3><p>使用 split(‘’) 切割字符串，使用 Array.sort 通过 localeCompare() 去排序，再使用 join(‘’) 组合。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const sortCharactersInString = str =&gt;</span><br><span class="line">  str.split(&#x27;&#x27;).sort((a, b) =&gt; a.localeCompare(b)).join(&#x27;&#x27;);</span><br><span class="line">// sortCharactersInString(&#x27;cabbage&#x27;) -&gt; &#x27;aabbceg&#x27;</span><br></pre></td></tr></table></figure>
<h3 id="字符串截断"><a href="#字符串截断" class="headerlink" title="字符串截断"></a>字符串截断</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const truncate = (str, num) =&gt;</span><br><span class="line">  str.length &gt; num ? str.slice(0, num &gt; 3 ? num - 3 : num) + &#x27;...&#x27; : str;</span><br><span class="line">// truncate(&#x27;boomerang&#x27;, 7) -&gt; &#x27;boom...&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="Media"><a href="#Media" class="headerlink" title="Media"></a>Media</h2><h3 id="语音合成-试验功能"><a href="#语音合成-试验功能" class="headerlink" title="语音合成(试验功能)"></a>语音合成(试验功能)</h3><p>使用 SpeechSynthesisUtterance.voice 和 indow.speechSynthesis.getVoices() 将消息转换为语音。<br>使用 window.speechSynthesis.speak() 来播放消息。<br><a href="https://developer.mozilla.org/en-US/docs/Web/API/SpeechSynthesisUtterance">了解更多API</a></p>
<h2 id="Browser"><a href="#Browser" class="headerlink" title="Browser"></a>Browser</h2><h3 id="底部可见即滚动至底部"><a href="#底部可见即滚动至底部" class="headerlink" title="底部可见即滚动至底部"></a>底部可见即滚动至底部</h3><p>使用 scrollY，scrollHeight 和 clientHeight 来确定页面的底部是否可见。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const bottomVisible = _ =&gt;</span><br><span class="line">  document.documentElement.clientHeight + window.scrollY &gt;= (document.documentElement.scrollHeight || document.documentElement.clientHeight);</span><br><span class="line">// bottomVisible() -&gt; true</span><br></pre></td></tr></table></figure>
<h3 id="当前链接地址"><a href="#当前链接地址" class="headerlink" title="当前链接地址"></a>当前链接地址</h3><p>使用 window.location.href 来获取当前链接地址。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const currentUrl = _ =&gt; window.location.href;</span><br><span class="line">// currentUrl() -&gt; &#x27;https://google.com&#x27;</span><br></pre></td></tr></table></figure>
<h3 id="元素在视窗中可见"><a href="#元素在视窗中可见" class="headerlink" title="元素在视窗中可见"></a>元素在视窗中可见</h3><p>使用 Element.getBoundingClientRect() 和 window.inner(Width|Height) 值来确定给定的元素在视口中是否可见。<br>第二个参数用来指定元素是否要求完全可见，指定 true 即部分可见，默认为全部可见。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const elementIsVisibleInViewport = (el, partiallyVisible = false) =&gt; &#123;</span><br><span class="line">  const &#123; top, left, bottom, right &#125; = el.getBoundingClientRect();</span><br><span class="line">  return partiallyVisible</span><br><span class="line">    ? ((top &gt; 0 &amp;&amp; top &lt; innerHeight) || (bottom &gt; 0 &amp;&amp; bottom &lt; innerHeight)) &amp;&amp;</span><br><span class="line">      ((left &gt; 0 &amp;&amp; left &lt; innerWidth) || (right &gt; 0 &amp;&amp; right &lt; innerWidth))</span><br><span class="line">    : top &gt;= 0 &amp;&amp; left &gt;= 0 &amp;&amp; bottom &lt;= innerHeight &amp;&amp; right &lt;= innerWidth;</span><br><span class="line">&#125;;</span><br><span class="line">// e.g. 100x100 viewport and a 10x10px element at position &#123;top: -1, left: 0, bottom: 9, right: 10&#125;</span><br><span class="line">// elementIsVisibleInViewport(el) -&gt; false (not fully visible)</span><br><span class="line">// elementIsVisibleInViewport(el, true) -&gt; true (partially visible)</span><br></pre></td></tr></table></figure>
<h3 id="获取滚动位置"><a href="#获取滚动位置" class="headerlink" title="获取滚动位置"></a>获取滚动位置</h3><p>如果存在，使用 pageXOffset 和 pageYOffset，否则使用 scrollLeft 和 scrollTop。<br>你可以省略 el，默认使用 window。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const getScrollPos = (el = window) =&gt;</span><br><span class="line">  (&#123;x: (el.pageXOffset !== undefined) ? el.pageXOffset : el.scrollLeft,</span><br><span class="line">    y: (el.pageYOffset !== undefined) ? el.pageYOffset : el.scrollTop&#125;);</span><br><span class="line">// getScrollPos() -&gt; &#123;x: 0, y: 200&#125;</span><br></pre></td></tr></table></figure>
<h3 id="URL-重定向"><a href="#URL-重定向" class="headerlink" title="URL 重定向"></a>URL 重定向</h3><p>使用 window.location.href 或者 window.location.replace() 去重定向到 url。<br>第二个参数用来控制模拟链接点击（true - 默认）还是 HTTP 重定向（false）。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const redirect = (url, asLink = true) =&gt;</span><br><span class="line">  asLink ? window.location.href = url : window.location.replace(url);</span><br><span class="line">// redirect(&#x27;https://google.com&#x27;)</span><br></pre></td></tr></table></figure>
<h3 id="滚动至顶部"><a href="#滚动至顶部" class="headerlink" title="滚动至顶部"></a>滚动至顶部</h3><p>使用 document.documentElement.scrollTop 或 document.body.scrollTop 获取到顶端的距离。<br>从顶部滚动一小部分距离。 使用 window.requestAnimationFrame（） 实现滚动动画。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const scrollToTop = _ =&gt; &#123;</span><br><span class="line">  const c = document.documentElement.scrollTop || document.body.scrollTop;</span><br><span class="line">  if (c &gt; 0) &#123;</span><br><span class="line">    window.requestAnimationFrame(scrollToTop);</span><br><span class="line">    window.scrollTo(0, c - c / 8);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">// scrollToTop()</span><br></pre></td></tr></table></figure>

<h2 id="Date"><a href="#Date" class="headerlink" title="Date"></a>Date</h2><h3 id="获取两个日期间的差距"><a href="#获取两个日期间的差距" class="headerlink" title="获取两个日期间的差距"></a>获取两个日期间的差距</h3><p>计算两个 Date 对象之间的差距（以天为单位）。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const getDaysDiffBetweenDates = (dateInitial, dateFinal) =&gt; (dateFinal - dateInitial) / (1000 * 3600 * 24);</span><br><span class="line">// getDaysDiffBetweenDates(new Date(&quot;2017-12-13&quot;), new Date(&quot;2017-12-22&quot;)) -&gt; 9</span><br></pre></td></tr></table></figure>

<h2 id="Utility"><a href="#Utility" class="headerlink" title="Utility"></a>Utility</h2><h3 id="获取值的原始类型"><a href="#获取值的原始类型" class="headerlink" title="获取值的原始类型"></a>获取值的原始类型</h3><p>返回值的构造函数名称的小写字符，值为 undefined 或 null 时则返回 undefined 或 null。  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const getType = v =&gt;</span><br><span class="line">  v === undefined ? &#x27;undefined&#x27; : v === null ? &#x27;null&#x27; : v.constructor.name.toLowerCase();</span><br><span class="line">// getType(new Set([1,2,3])) -&gt; &quot;set&quot;</span><br></pre></td></tr></table></figure>
<h3 id="测量函数的耗时"><a href="#测量函数的耗时" class="headerlink" title="测量函数的耗时"></a>测量函数的耗时</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const timeTaken = callback =&gt; &#123;</span><br><span class="line">  console.time(&#x27;timeTaken&#x27;);</span><br><span class="line">  const r = callback();</span><br><span class="line">  console.timeEnd(&#x27;timeTaken&#x27;);</span><br><span class="line">  return r;</span><br><span class="line">&#125;;</span><br><span class="line">// timeTaken(() =&gt; Math.pow(2, 10)) -&gt; 1024</span><br><span class="line">// (logged): timeTaken: 0.02099609375ms</span><br></pre></td></tr></table></figure>
<h3 id="指定范围内的随机整数"><a href="#指定范围内的随机整数" class="headerlink" title="指定范围内的随机整数"></a>指定范围内的随机整数</h3><p>使用 Math.random() 去生成一个在指定范围内的随机数，使用 Math.floor() 将其转换为整数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const randomIntegerInRange = (min, max) =&gt; Math.floor(Math.random() * (max - min + 1)) + min;</span><br><span class="line">// randomIntegerInRange(0, 5) -&gt; 2</span><br></pre></td></tr></table></figure>
<h3 id="指定范围内的随机数"><a href="#指定范围内的随机数" class="headerlink" title="指定范围内的随机数"></a>指定范围内的随机数</h3><p>使用 Math.random() 去生成一个在指定范围内的随机数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const randomInRange = (min, max) =&gt; Math.random() * (max - min) + min;</span><br><span class="line">// randomInRange(2,10) -&gt; 6.0211363285087005</span><br></pre></td></tr></table></figure>
<h3 id="RGB转十六进制"><a href="#RGB转十六进制" class="headerlink" title="RGB转十六进制"></a>RGB转十六进制</h3><p>使用按位左移运算符（&lt;&lt;）和 toString(16) 将 RGB 参数转换为十六进制，然后使用 padStart(6, ‘0’) 去获取6位数的十六进制。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const rgbToHex = (r, g, b) =&gt; ((r &lt;&lt; 16) + (g &lt;&lt; 8) + b).toString(16).padStart(6, &#x27;0&#x27;);</span><br><span class="line">// rgbToHex(255, 165, 1) -&gt; &#x27;ffa501&#x27;</span><br></pre></td></tr></table></figure>
<h3 id="交换两个变量的值"><a href="#交换两个变量的值" class="headerlink" title="交换两个变量的值"></a>交换两个变量的值</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[varA, varB] = [varB, varA];</span><br><span class="line">// [x, y] = [y, x]</span><br></pre></td></tr></table></figure>
<h3 id="URL参数"><a href="#URL参数" class="headerlink" title="URL参数"></a>URL参数</h3><p>使用 match() 和一个合适的正则去获取所有键值对，使用 Array.reduce() 合并到一个对象中。<br>允许将 location.search 作为参数传递。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const getUrlParameters = url =&gt;</span><br><span class="line">  url.match(/([^?=&amp;]+)(=([^&amp;]*))/g).reduce(</span><br><span class="line">    (a, v) =&gt; (a[v.slice(0, v.indexOf(&#x27;=&#x27;))] = v.slice(v.indexOf(&#x27;=&#x27;) + 1), a), &#123;&#125;</span><br><span class="line">  );</span><br><span class="line">// getUrlParameters(&#x27;http://url.com/page?name=Adam&amp;surname=Smith&#x27;) -&gt; &#123;name: &#x27;Adam&#x27;, surname: &#x27;Smith&#x27;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="值或默认值"><a href="#值或默认值" class="headerlink" title="值或默认值"></a>值或默认值</h3><p>默认返回 value 如果 value 为假，则返回默认值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const valueOrDefault = (value, d) =&gt; value || d;</span><br><span class="line">// valueOrDefault(NaN, 30) -&gt; 30</span><br></pre></td></tr></table></figure></div></article><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/ES6/">ES6</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2019/01/22/32.Vue%E7%BC%93%E5%AD%98%E6%95%B0%E6%8D%AE%E5%B9%B6%E6%BB%9A%E5%8A%A8%E5%88%B0%E5%88%97%E8%A1%A8/"><i class="fa fa-chevron-left">  </i><span>Vue里返回时缓存数据并滚动到列表信息</span></a></div><div class="next-post pull-right"><a href="/2018/11/28/31.js/"><span>JS &amp; Rx.js &amp; HTTP</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2017 - 2024 By Doug Flands</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="footer_custom_text">+1S</div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.1"></script><script src="/js/fancybox.js?version=1.9.1"></script><script src="/js/sidebar.js?version=1.9.1"></script><script src="/js/copy.js?version=1.9.1"></script><script src="/js/fireworks.js?version=1.9.1"></script><script src="/js/transition.js?version=1.9.1"></script><script src="/js/scroll.js?version=1.9.1"></script><script src="/js/head.js?version=1.9.1"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>